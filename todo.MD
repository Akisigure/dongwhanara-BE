# 포트폴리오 개선 및 성능 최적화 Todo List

이 문서는 Gemini와의 대화를 통해 '동화나라' 프로젝트를 개선하기 위한 작업 목록을 정리한 것입니다.

## 1. 포트폴리오 가치 향상

### 1.1. README.md 완성도 높이기 (완료 및 추가 개선)

- [x] **프로젝트 소개**: 서비스의 목적과 매력적인 설명 추가.
- [x] **주요 기능**: 핵심 기능 목록화.
- [x] **기술 스택**: 사용된 기술 명시.
- [x] **설치 및 실행 방법**: 다른 개발자가 쉽게 실행할 수 있는 가이드 제공.
- [x] **API 명세**: Postman, Swagger 등을 활용한 상세한 API 문서 포함.
- [x] **데이터베이스 모델링 (ERD)**: ERD 이미지 추가로 설계 역량 어필.
- [ ] **추가 개선 제안**:
    - [ ] README 최상단에 Live Demo URL 추가 (배포 후).
    - [ ] 프로젝트의 핵심을 한눈에 볼 수 있는 요약 섹션 추가.

### 1.2. 프로젝트 배포

- [ ] AWS, GCP, PythonAnywhere 등 클라우드 서비스의 무료 티어를 활용하여 프로젝트 배포.
- [ ] 배포 경험을 통해 서버 운영 및 인프라 이해도 어필.

### 1.3. 코드 품질 향상

- [ ] `settings.py`의 민감 정보(SECRET_KEY 등)를 환경 변수로 분리 (`python-decouple` 활용).
- [ ] 테스트 코드 추가 작성으로 코드 안정성 및 테스트 커버리지 확보.

## 2. 성능 최적화 및 리팩토링

### 2.1. AI 추천 기능 성능 최적화

- **문제**: API 요청 시마다 Sentence Transformer 모델을 로드하고 모든 책의 임베딩을 실시간으로 계산하여 서버 부하 및 응답 지연 발생.
- **Todo**:
    - [ ] `books/apps.py`를 수정하여 **모델을 앱 시작 시 한 번만 로드**하도록 변경.
    - [ ] `Book` 모델에 `embedding` 필드를 추가하고, `save` 메서드를 오버라이드하여 **임베딩 벡터를 미리 계산하여 DB에 저장**하는 로직 구현.
    - [ ] 기존 `Book` 데이터에 대한 마이그레이션 스크립트 또는 관리자 명령 작성.

### 2.2. 데이터베이스 N+1 쿼리 문제 해결

- **문제**: API 직렬화 과정 등에서 관련된 객체를 조회할 때 불필요한 쿼리가 다수 발생하는 N+1 문제.
- **Todo**:
    - [ ] `django-debug-toolbar`를 설치하여 쿼리 현황 분석.
    - [ ] `select_related` (ForeignKey)와 `prefetch_related` (ManyToManyField, 역참조)를 사용하여 쿼리 최적화.
        - 예: `BookReport` 조회 시 `select_related('user')` 사용.
        - 예: `Book` 조회 시 `prefetch_related('recommend_users')` 사용.

### 2.3. 챗봇 응답 속도 및 서버 부하 개선

- **문제**: OpenAI API 호출 시 응답을 기다리는 동안 프로세스가 블로킹되어 전체 서비스 성능 저하.
- **Todo**:
    - [ ] `Celery`와 `Redis` (또는 RabbitMQ)를 도입하여 **외부 API 호출 로직을 비동기 백그라운드 작업으로 전환**.
    - [ ] View에서는 작업 등록 후 즉시 응답, Worker가 실제 API 통신 및 DB 저장을 처리하도록 구조 변경.

## 3. 성능 테스트 방법론

### 3.1. 테스트 계획

- **Todo**:
    - [ ] **(DB 쿼리)** `django-debug-toolbar`를 설치하고 설정하여 리팩토링 전/후 쿼리 수 비교.
    - [ ] **(실행 시간)** Postman 등 API 클라이언트나 Python의 `time` 모듈을 사용하여 API 응답 시간 및 함수 실행 시간 측정.
    - [ ] **(부하 테스트)** `locust`를 사용하여 동시 접속자 시나리오를 가정한 부하 테스트 진행.

### 3.2. 테스트 워크플로우

1.  **기준선 측정**: 개선 전 성능(쿼리 수, 응답 시간)을 기록.
2.  **리팩토링 적용**: 제안된 개선안 중 하나를 적용.
3.  **효과 측정**: 개선 후 성능을 다시 측정하여 기준선과 비교.
4.  **반복**.
